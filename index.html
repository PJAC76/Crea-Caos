<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crea-Caos: Aventura Creativa</title>
    <!-- Tailwind CSS (CDN for simplicity) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#f425af',
                        secondary: '#00d4ff',
                        accent: '#ffdd00',
                        'background-dark': '#120a1f',
                        'surface-dark': '#1e1433',
                        'surface-accent': '#2d1f45',
                    },
                    animation: {
                        'bounce-slow': 'bounce 3s infinite',
                        'pulse-fast': 'pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    <!-- Google Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    
    <!-- TensorFlow.js & MobileNet -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@latest/dist/mobilenet.min.js"></script>

    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #120a1f;
            color: white;
            overflow: hidden; /* App-like feel */
        }
        .scan-line {
            animation: scan 2s linear infinite;
        }
        @keyframes scan {
            0% { top: 0%; opacity: 0; }
            50% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }
        /* Hide Scrollbar but allow scroll */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* Transitions */
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="h-screen w-screen relative">

    <!-- APP CONTAINER -->
    <div id="app" class="h-full w-full flex flex-col relative overflow-hidden max-w-md mx-auto bg-background-dark shadow-2xl">
        
        <!-- SCREEN: LOADING -->
        <section id="screen-loading" class="absolute inset-0 z-50 flex flex-col items-center justify-center bg-background-dark p-8">
            <div class="relative mb-8">
                <div class="size-32 rounded-full bg-gradient-to-tr from-primary to-secondary animate-spin blur-xl absolute inset-0 opacity-50"></div>
                <div class="size-32 rounded-full bg-surface-dark relative flex items-center justify-center border-4 border-white/10 shadow-2xl z-10">
                    <span class="material-symbols-outlined text-6xl text-transparent bg-clip-text bg-gradient-to-br from-primary to-secondary animate-bounce">rocket_launch</span>
                </div>
            </div>
            <h1 class="text-4xl font-black mb-2 text-center text-transparent bg-clip-text bg-gradient-to-r from-primary via-secondary to-accent">CREA-CAOS</h1>
            <p id="loading-text" class="text-white/50 text-sm font-medium animate-pulse mb-8">Iniciando motores creativos...</p>
            
            <div class="w-full h-2 bg-surface-accent rounded-full overflow-hidden relative">
                <div id="loading-bar" class="h-full bg-gradient-to-r from-primary to-secondary w-0 transition-all duration-300"></div>
            </div>
        </section>

        <!-- SCREEN: MENU -->
        <section id="screen-menu" class="absolute inset-0 flex-col hidden overflow-y-auto no-scrollbar pb-20">
            <header class="p-6 pt-12 flex justify-between items-center bg-gradient-to-b from-background-dark to-transparent sticky top-0 z-10">
                <div class="flex items-center gap-3">
                    <div class="size-10 rounded-full bg-gradient-to-br from-primary to-secondary p-[2px]">
                        <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuA0OgfMPryJIy7pXxRuLOXzQzVj0DOiDDckr-okCwf5YO-XR9zXOU6zE95MZ4mfIoJAgXYE-bNDh69C3qbOWLh7bh2aFADCPi15llG3QBbEW4mqr7_iklohtrmIsZ3lbMobo2Gg4TMNF74r1BgARXyFi1o_qPxPhZXh6rOh3vrEAEum94rzY6_g_yiPTQWDZrPTXAn3O7iZpCOXsiL6SCRO7k7qxxtfsuucvOeh2bac9xmogca0oFyrgnQkD82HqTsA_phC-gzsWx8" class="rounded-full w-full h-full object-cover" alt="Avatar">
                    </div>
                    <div>
                        <p class="text-xs text-white/60 font-bold uppercase tracking-wider">Bienvenido</p>
                        <h2 class="text-xl font-bold">Capit√°n Creativo</h2>
                    </div>
                </div>
                <button onclick="app.showSettings()" class="size-10 rounded-full bg-surface-accent flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors">
                    <span class="material-symbols-outlined text-white/80">settings</span>
                </button>
            </header>

            <main class="flex-1 px-6 flex flex-col gap-6">
                <!-- Promo Banner -->
                <div class="relative w-full aspect-[4/3] rounded-3xl overflow-hidden shadow-2xl group cursor-pointer transition-transform active:scale-95">
                    <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=2070&auto=format&fit=crop" class="absolute inset-0 w-full h-full object-cover transition-transform group-hover:scale-110 duration-700" alt="Game Banner">
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent p-6 flex flex-col justify-end">
                        <span class="bg-primary px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest w-fit mb-2">Nuevo Evento</span>
                        <h3 class="text-3xl font-black leading-tight mb-1">Caos C√≥smico</h3>
                        <p class="text-white/80 text-sm line-clamp-2">¬°Constr√∫ye m√°quinas espaciales y compite por la galaxia!</p>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="grid grid-cols-2 gap-4">
                    <button class="bg-surface-accent p-6 rounded-3xl border border-white/5 flex flex-col items-center gap-3 hover:bg-surface-accent/80 transition-all active:scale-95" id="btn-create-game" onclick="app.createGame()">
                        <div class="size-14 rounded-2xl bg-gradient-to-br from-primary to-pink-600 flex items-center justify-center shadow-lg shadow-primary/30">
                            <span class="material-symbols-outlined text-3xl">add_circle</span>
                        </div>
                        <span class="font-bold text-sm">Crear Partida</span>
                    </button>
                    <button class="bg-surface-accent p-6 rounded-3xl border border-white/5 flex flex-col items-center gap-3 hover:bg-surface-accent/80 transition-all active:scale-95" id="btn-join-game" onclick="app.joinGame()">
                        <div class="size-14 rounded-2xl bg-gradient-to-br from-secondary to-blue-600 flex items-center justify-center shadow-lg shadow-secondary/30">
                            <span class="material-symbols-outlined text-3xl">login</span>
                        </div>
                        <span class="font-bold text-sm">Unirse</span>
                    </button>
                </div>
            </main>
        </section>

        <!-- SCREEN: LOBBY -->
        <section id="screen-lobby" class="absolute inset-0 flex-col hidden z-20 bg-background-dark">
            <header class="p-6 pt-8 flex justify-between items-center">
                <button onclick="app.showScreen('menu')" class="size-10 rounded-full bg-surface-accent flex items-center justify-center border border-white/10">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <div class="flex flex-col items-end">
                    <span class="text-[10px] text-white/40 uppercase tracking-widest font-bold">C√ìDIGO DE SALA</span>
                    <span id="lobby-room-code" class="text-3xl font-black text-primary tracking-widest">ABCD</span>
                </div>
            </header>

            <main class="flex-1 p-6 flex flex-col">
                <div class="flex-1 bg-surface-accent/30 rounded-3xl border-2 border-dashed border-white/10 p-4 mb-6">
                    <div id="player-grid" class="grid grid-cols-4 gap-4 content-start">
                        <!-- Players injected here by JS -->
                    </div>
                </div>

                <div class="bg-surface-dark rounded-2xl p-4 border border-white/5 flex items-center justify-between mb-6">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-accent">group</span>
                        <span class="text-sm font-bold">Jugadores Listos</span>
                    </div>
                    <span id="player-count" class="text-xl font-bold">0 / 8</span>
                </div>

                <button id="btn-start-game" class="w-full h-16 bg-white text-black font-black text-lg rounded-full shadow-xl shadow-white/10 flex items-center justify-center gap-2 active:scale-95 transition-all">
                    <span class="material-symbols-outlined">play_circle</span> DESPEGAR
                </button>
            </main>
        </section>

        <!-- SCREEN: GAME SELECTION -->
        <section id="screen-game-selection" class="absolute inset-0 flex-col hidden z-20 bg-background-dark">
            <header class="p-6 pt-12">
                <h2 class="text-2xl font-black mb-1">Elige tu Batalla</h2>
                <p class="text-white/50 text-sm">Selecciona un minijuego para competir</p>
            </header>
            
            <main class="flex-1 px-6 pb-6 overflow-y-auto no-scrollbar flex flex-col gap-4">
                <!-- Card: Contraption -->
                <div onclick="app.selectMinigame('contraption')" class="relative h-48 rounded-3xl overflow-hidden cursor-pointer group active:scale-95 transition-all">
                    <img src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?q=80&w=2070&auto=format&fit=crop" class="absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity" alt="Contraption">
                    <div class="absolute inset-0 bg-gradient-to-r from-black/80 to-transparent p-6 flex flex-col justify-center">
                        <span class="material-symbols-outlined text-4xl text-accent mb-2">construction</span>
                        <h3 class="text-2xl font-black italic uppercase">Contraption Craft Off</h3>
                        <p class="text-xs text-white/70 mt-1 max-w-[70%]">Construye la m√°quina m√°s loca con piezas aleatorias.</p>
                    </div>
                </div>
                 <!-- Card: Scavenger -->
                <div onclick="app.selectMinigame('scavenger')" class="relative h-48 rounded-3xl overflow-hidden cursor-pointer group active:scale-95 transition-all">
                    <img src="https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=2070&auto=format&fit=crop" class="absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity" alt="Scavenger">
                    <div class="absolute inset-0 bg-gradient-to-r from-blue-900/80 to-transparent p-6 flex flex-col justify-center">
                        <span class="material-symbols-outlined text-4xl text-secondary mb-2">center_focus_strong</span>
                        <h3 class="text-2xl font-black italic uppercase">Caza de Pistas</h3>
                        <p class="text-xs text-white/70 mt-1 max-w-[70%]">Encuentra objetos reales usando la c√°mara IA.</p>
                    </div>
                </div>
                 <!-- Card: Doodle -->
                <div onclick="app.selectMinigame('doodle')" class="relative h-48 rounded-3xl overflow-hidden cursor-pointer group active:scale-95 transition-all">
                    <img src="https://images.unsplash.com/photo-1513364776144-60967b0f800f?q=80&w=2071&auto=format&fit=crop" class="absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity" alt="Doodle">
                    <div class="absolute inset-0 bg-gradient-to-r from-purple-900/80 to-transparent p-6 flex flex-col justify-center">
                        <span class="material-symbols-outlined text-4xl text-primary mb-2">brush</span>
                        <h3 class="text-2xl font-black italic uppercase">Doodle Duelo</h3>
                        <p class="text-xs text-white/70 mt-1 max-w-[70%]">Dibuja conceptos abstractos y gana votos.</p>
                    </div>
                </div>
            </main>
        </section>

        <!-- SCREEN: GAMEPLAY AREA -->
        <section id="screen-game" class="absolute inset-0 flex-col hidden z-30 bg-background-dark">
            <header class="p-4 pt-8 flex items-center justify-between absolute top-0 w-full z-20 pointer-events-none">
                <div class="flex items-center gap-2 pointer-events-auto">
                    <div class="size-8 rounded-full bg-gradient-to-br from-primary to-secondary p-[1px]">
                        <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuA0OgfMPryJIy7pXxRuLOXzQzVj0DOiDDckr-okCwf5YO-XR9zXOU6zE95MZ4mfIoJAgXYE-bNDh69C3qbOWLh7bh2aFADCPi15llG3QBbEW4mqr7_iklohtrmIsZ3lbMobo2Gg4TMNF74r1BgARXyFi1o_qPxPhZXh6rOh3vrEAEum94rzY6_g_yiPTQWDZrPTXAn3O7iZpCOXsiL6SCRO7k7qxxtfsuucvOeh2bac9xmogca0oFyrgnQkD82HqTsA_phC-gzsWx8" class="rounded-full w-full h-full object-cover" alt="User">
                    </div>
                     <div>
                        <p class="text-[10px] text-white/50 font-bold uppercase">JUGADOR 1</p>
                        <p class="text-xs font-bold leading-none">Equipo Rojo</p>
                    </div>
                </div>
                <div class="bg-surface-dark/80 backdrop-blur-md border border-white/10 rounded-full px-3 py-1 flex items-center gap-2 pointer-events-auto">
                    <div class="size-2 rounded-full bg-primary animate-pulse"></div>
                    <span class="text-[10px] font-bold uppercase tracking-widest">EN JUEGO</span>
                </div>
            </header>
            <main id="game-content" class="flex-1 relative flex flex-col items-center p-6 overflow-y-auto"></main>
            <footer id="game-footer" class="hidden w-full z-10 bg-surface-dark border-t border-white/5"></footer>
        </section>

        <!-- SCREEN: LEADERBOARD -->
        <section id="screen-leaderboard" class="absolute inset-0 flex-col hidden z-40 bg-background-dark p-8 items-center justify-center">
            <h1 class="text-4xl font-black mb-8 text-center">¬°Resultados!</h1>
             <!-- Placeholder for results -->
             <div class="w-full bg-surface-accent p-6 rounded-3xl mb-8">
                 <div class="flex items-center justify-between mb-4">
                     <div class="flex items-center gap-3">
                         <span class="text-2xl">ü•á</span>
                         <span class="font-bold">Capit√°n Creativo</span>
                     </div>
                     <span class="font-black text-primary">500 pts</span>
                 </div>
                 <div class="flex items-center justify-between opacity-50">
                     <div class="flex items-center gap-3">
                         <span class="text-2xl">ü•à</span>
                         <span class="font-bold">Ana Artista</span>
                     </div>
                     <span class="font-bold">350 pts</span>
                 </div>
             </div>
             
             <button onclick="app.showScreen('menu')" class="bg-white text-black px-8 py-3 rounded-full font-bold hover:scale-105 transition-transform">Volver al Men√∫</button>
        </section>

        <!-- MODAL: SETTINGS -->
        <div id="screen-settings" class="absolute inset-0 hidden z-[60] bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center">
            <div class="bg-surface-dark w-full sm:w-[90%] rounded-t-3xl sm:rounded-3xl p-8 animate-in slide-in-from-bottom duration-300 border-t border-white/10">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-black">Ajustes</h2>
                    <button onclick="app.hideSettings()" class="size-8 rounded-full bg-surface-accent flex items-center justify-center">
                        <span class="material-symbols-outlined text-sm">close</span>
                    </button>
                </div>
                
                <div class="flex flex-col gap-6">
                    <div>
                        <div class="flex justify-between mb-2">
                            <span class="text-sm font-bold">M√∫sica</span>
                            <span class="text-xs text-white/50">70%</span>
                        </div>
                        <div class="h-2 bg-surface-accent rounded-full overflow-hidden">
                            <div class="h-full bg-primary w-[70%]"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-2">
                            <span class="text-sm font-bold">Efectos de Sonido</span>
                            <span class="text-xs text-white/50">50%</span>
                        </div>
                        <div class="h-2 bg-surface-accent rounded-full overflow-hidden">
                            <div class="h-full bg-secondary w-[50%]"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-4">
                        <button class="text-red-400 text-sm font-bold">Cerrar Sesi√≥n</button>
                        <button onclick="app.hideSettings()" class="bg-white text-black px-6 py-2 rounded-full font-bold text-sm">Guardar</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- App Logic -->
    <script src="app.js"></script>
</body>
</html>